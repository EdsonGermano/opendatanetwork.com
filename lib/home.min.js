"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function multiComplete(t,e){function n(t,e,n){return function(o){return"https://"+t+"/views/"+e+"/columns/"+n+"/suggest/"+o+"?size=5"}}function o(t){window.location.href=t}var r="odn.data.socrata.com",s=d3.select(t),a=d3.select(e),i=n(r,"fpum-bjbr","encoded"),u=function(t){var e=_slicedToArray(t.attributes,2),n=e[0],r=e[1];o("http://"+n+"/dataset/"+r)},c=function(t){return"<span class='dataset-name'>"+t.text+"</span>                 <span class='dataset-domain'>"+t.attributes[0]+"</span>"},l=new Results("Datasets",a,u,!0,c),p=new Complete(i,l),h=n(r,"7g2b-8brv","autocomplete_name"),m=function(t){return o("/"+t.text.replace(/ /g,"_"))},d=new Results("Regions",a,m),f=new Complete(h,d),g=n(r,"8ae5-ghum","domain"),y=function(t){return o("/search?domains="+t.text)},v=new Results("Publishers",a,y),w=new Complete(g,v),k=n(r,"864v-r7tf","category"),C=function(t){return o("/search?categories="+t.text)},U=new Results("Categories",a,C),j=new Complete(k,U),_=[p,f,w,j];return new AutoSuggestRegionController(s,a,_)}$(document).ready(function(){$(".search-link").click(function(){var t=$("#q").val().trim();0===t.length?$("#q").focus():$("#form").submit()})}),Array.prototype.includes=function(t){return this.indexOf(t)>-1},String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,n){return"undefined"!=typeof t[n]?t[n]:e})},String.prototype.split2=function(t){var e=this.split(t);return 1==e.length&&""===e[0]?[]:e};var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),ApiController=function(){function t(){_classCallCheck(this,t),this.autoCompleteNameSuggestUrl="https://odn.data.socrata.com/views/7g2b-8brv/columns/autocomplete_name/suggest/{0}?size=10&fuzz=0",this.categoriesUrl="/categories.json",this.childRegionsUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_id={0}&$limit={1}",this.costOfLivingUrl="https://odn.data.socrata.com/resource/hpnf-gnfu.json?$order=name&$where=",this.datasetSummaryUrl="https://{0}/api/views/{1}.json",this.domainsUrl="https://api.us.socrata.com/api/catalog/v1/domains",this.earningsByPlaceUrl="https://odn.data.socrata.com/resource/wmwh-4vak.json/?type=place&$limit=50000&$where=population%20%3E%205000",this.earningsUrl="https://odn.data.socrata.com/resource/wmwh-4vak.json?$where=",this.educationByPlaceUrl="https://odn.data.socrata.com/resource/uf4m-5u8r.json?type=place&$limit=50000&$where=population%20%3E%205000",this.educationUrl="https://odn.data.socrata.com/resource/uf4m-5u8r.json?$where=",this.gdpUrl="https://odn.data.socrata.com/resource/ks2j-vhr8.json?$where=",this.mostPopulousRegionTypeUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_id={0}&child_type={1}&$limit={2}&$order=child_population desc",this.occupationsByPlaceUrl="https://odn.data.socrata.com/resource/qfcm-fw3i.json?occupation={0}&type=place&$limit=50000&$where=population%20%3E%205000",this.occupationsUrl="https://odn.data.socrata.com/resource/qfcm-fw3i.json?$order=occupation&$where=",this.parentStateUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_type=state&child_id={0}",this.placeFromRosterUrl="https://odn.data.socrata.com/resource/kmnh-b5wu?id={0}",this.placesUrl="https://odn.data.socrata.com/resource/gm3u-gw57.json/?type=place&$limit=50000&$where=population%20%3E%205000",this.populationUrl="https://odn.data.socrata.com/resource/e3rd-zzmr.json?$order=year,name&$where=",this.similarRegionsUrl="https://socrata-peers.herokuapp.com/peers.json?id={0}&vectors={1}&n=10",this.supportedVectorsUrls="http://socrata-peers.herokuapp.com/supported.json?id={0}",this.healthDataUrls={rwjf_county_health_rankings_2015:"https://odn.data.socrata.com/resource/7ayp-utp2.json?$where=",cdc_brfss_prevalence_2011_2013:"https://odn.data.socrata.com/resource/n4rt-3rmd.json?$where="}}return _createClass(t,[{key:"getAutoCompleteNameSuggestions",value:function(t){return d3.promise.json(this.autoCompleteNameSuggestUrl.format(encodeURIComponent(t)))}},{key:"getCategories",value:function(){return d3.promise.json(this.categoriesUrl)}},{key:"getChildRegions",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.childRegionsUrl.format(t,e))}},{key:"getCitiesInState",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(t,"place",e))}},{key:"getCostOfLivingData",value:function(t){return this.getData(this.costOfLivingUrl,t)}},{key:"getCountiesInState",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(t,"county",e))}},{key:"getData",value:function(t,e){var n=e.map(function(t){return"id='"+t+"'"});return d3.promise.json(t+encodeURI(n.join(" OR ")))}},{key:"getDatasetSummary",value:function(t,e){return d3.promise.json(this.datasetSummaryUrl.format(t,e))}},{key:"getDomains",value:function(){return d3.promise.json(this.domainsUrl)}},{key:"getEarningsByPlace",value:function(){return d3.promise.json(this.earningsByPlaceUrl)}},{key:"getEarningsData",value:function(t){return this.getData(this.earningsUrl,t)}},{key:"getEducationByPlace",value:function(){return d3.promise.json(this.educationByPlaceUrl)}},{key:"getEducationData",value:function(t){return this.getData(this.educationUrl,t)}},{key:"getGdpData",value:function(t){return this.getData(this.gdpUrl,t)}},{key:"getMetrosInState",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(t,"msa",e))}},{key:"getOccupationsByPlace",value:function(t){return d3.promise.json(this.occupationsByPlaceUrl.format(t))}},{key:"getOccupationsData",value:function(t){return this.getData(this.occupationsUrl,t)}},{key:"getParentState",value:function(t){return d3.promise.json(this.parentStateUrl.format(t.id))}},{key:"getPlaceFromRoster",value:function(t){return d3.promise.json(this.placeFromRosterUrl.format(t))}},{key:"getPopulationData",value:function(t){return this.getData(this.populationUrl,t)}},{key:"getPlaces",value:function(){return d3.promise.json(this.placesUrl)}},{key:"getSimilarRegions",value:function(t,e){return d3.promise.json(this.similarRegionsUrl.format(t,e.join(",")))}},{key:"getSupportedVectors",value:function(t){return d3.promise.json(this.supportedVectorsUrls.format(t))}},{key:"getHealthRwjfChrData",value:function(t){return this.getData(this.healthDataUrls.rwjf_county_health_rankings_2015,t)}}]),t}(),Constants={ROSTER_URL:"https://federal.demo.socrata.com/resource/7g2b-8brv.json",AUTOCOMPLETE_SEPARATOR:":"},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),RegionLookup=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"get",value:function(t){return $.getJSON(Constants.ROSTER_URL+"?"+$.param(t))}},{key:"getOne",value:function(e){function n(t){if(0===t.length)return console.warn("no regions found for params: "),console.warn(e),null;if(1===t.length)return t[0];var n=_.filter(t,function(t){return"place"===t.type});return n.length>0?n[0]:t[0]}return new Promise(function(o,r){t.get(e).then(function(t){o(n(t))},function(t){throw t})})}},{key:"byName",value:function(e){return t.getOne({name:e})}},{key:"byID",value:function(e){return t.getOne({id:e})}},{key:"byAutocompleteName",value:function(e){return t.getOne({autocomplete_name:e})}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),Complete=function(){function t(e,n){_classCallCheck(this,t),this.queryBuilder=e,this.results=n}return _createClass(t,[{key:"get",value:function(t){return""===t?[]:void this.results.handle($.getJSON(this.queryBuilder(t)))}}]),t}(),Results=function(){function t(e,n,o){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],s=arguments.length<=4||void 0===arguments[4]?function(t){return t.text}:arguments[4];_classCallCheck(this,t),this.type=e,this.onSelect=o,this.encoded=r,this.showOption=s,this.container=n.append("div").attr("class","autocomplete-results-container").style("display","none"),this.title=this.container.append("p").attr("class","autocomplete-results-title").text(this.type),this.results=this.container.append("div").attr("class","autocomplete-results")}return _createClass(t,[{key:"hide",value:function(){this.container.style("display","none")}},{key:"unhide",value:function(){this.container.style("display","block")}},{key:"empty",value:function(){this.results.html("")}},{key:"handle",value:function(t){var e=this,n=function(t){e.empty();var n=t.options;0===n.length?e.hide():(e.unhide(),e.show(n))},o=function(t){throw t};t.then(n,o)}},{key:"decode",value:function(t){if(this.encoded){var e=t.text,n=e.lastIndexOf(" "),o=e.substring(0,n),r=e.substring(n),s=atob(r),a=s.split(Constants.AUTOCOMPLETE_SEPARATOR);return{text:o,attributes:a}}return{text:t.text}}},{key:"show",value:function(t){var e=this,n=t.map(function(t){return e.decode(t)});this.results.selectAll("li").data(n).enter().append("li").html(this.showOption).on("mouseover",function(){d3.select(this).classed("selected",!0)}).on("mouseout",function(){d3.select(this).classed("selected",!1)}).on("click",function(t){e.onSelect(t)})}}]),t}(),AutoSuggestRegionController=function(){function t(e,n,o){_classCallCheck(this,t),this.inputSelection=e,this.resultSelection=n,this.completers=o}return _createClass(t,[{key:"listen",value:function(){var t=this;t.inputSelection.on("input",function(){t.suggest(this.value)})}},{key:"navigate",value:function(t){window.location.href=t}},{key:"suggest",value:function(t){""===t?this.resultSelection.style("display","none"):(this.resultSelection.style("display","block"),this.completers.forEach(function(e){e.get(t)}))}}]),t}(),_slicedToArray=function(){function t(t,e){var n=[],o=!0,r=!1,s=void 0;try{for(var a,i=t[Symbol.iterator]();!(o=(a=i.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(u){r=!0,s=u}finally{try{!o&&i["return"]&&i["return"]()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),sourceComplete=function(){function t(t){return function(o){return"https://"+e+"/views/"+n+"/columns/"+t+"/suggest/"+o+"?size=5"}}var e="odn.data.socrata.com",n="pfgp-ifph",o=new Map;o.set("population","population"),o.set("earnings","earnings"),o.set("education","education"),o.set("occupations","occupations"),o.set("cost_of_living","rpp"),o.set("gdp","gdp");var r="population";return function(e,n,s,a){var i=d3.select(e),u=d3.select(n),c=o.has(s)?o.get(s):r,l=t(c),p=new Results("Regions with Data",u,a),h=new Complete(l,p);return new AutoSuggestRegionController(i,u,[h])}}();$(document).ready(function(){$(".slider").slick({arrows:!1,autoplay:!0,autoplaySpeed:2e3,slidesToScroll:1,slidesToShow:5}),multiComplete("#q",".region-list").listen(),$("#search-button").click(function(){$("#form").submit()}),$("#menu-item-communities").mouseenter(function(){$("#menu-communities").slideToggle(100),$("#menu-item-communities").addClass("selected"),searchMenu.hideOptionsMenu()}),$("#menu-item-communities").mouseleave(function(){$("#menu-communities").hide(100),$("#menu-item-communities").removeClass("selected")})});
//# sourceMappingURL=home.min.js.map
