"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function multiComplete(e,t){function n(e,t,n){return function(o){return"https://"+e+"/views/"+t+"/columns/"+n+"/suggest/"+o+"?size=5"}}function o(e){window.location.href=e}var r="odn.data.socrata.com",s=d3.select(e),a=d3.select(t),i=n(r,"fpum-bjbr","name"),u=function(e){return o("/search?q="+e)},c=new Results("Datasets",a,u),l=new Complete(i,c),p=n(r,"7g2b-8brv","autocomplete_name"),h=function(e){return o("/"+e.replace(/ /g,"_"))},m=new Results("Regions",a,h),d=new Complete(p,m),f=n(r,"8ae5-ghum","domain"),g=function(e){return o("/search?domains="+e)},y=new Results("Publishers",a,g),v=new Complete(f,y),k=n(r,"864v-r7tf","category"),w=function(e){return o("/search?categories="+e)},C=new Results("Categories",a,w),U=new Complete(k,C),j=[l,d,v,U];return new AutoSuggestRegionController(s,a,j)}$(document).ready(function(){$(".search-link").click(function(){var e=$("#q").val().trim();0===e.length?$("#q").focus():$("#form").submit()})}),Array.prototype.includes=function(e){return this.indexOf(e)>-1},String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})},String.prototype.split2=function(e){var t=this.split(e);return 1==t.length&&""===t[0]?[]:t};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ApiController=function(){function e(){_classCallCheck(this,e),this.autoCompleteNameSuggestUrl="https://odn.data.socrata.com/views/7g2b-8brv/columns/autocomplete_name/suggest/{0}?size=10&fuzz=0",this.categoriesUrl="/categories.json",this.childRegionsUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_id={0}&$limit={1}",this.costOfLivingUrl="https://odn.data.socrata.com/resource/hpnf-gnfu.json?$order=name&$where=",this.domainsUrl="https://api.us.socrata.com/api/catalog/v1/domains",this.earningsByPlaceUrl="https://odn.data.socrata.com/resource/wmwh-4vak.json/?type=place&$limit=50000&$where=population%20%3E%205000",this.earningsUrl="https://odn.data.socrata.com/resource/wmwh-4vak.json?$where=",this.educationByPlaceUrl="https://odn.data.socrata.com/resource/uf4m-5u8r.json?type=place&$limit=50000&$where=population%20%3E%205000",this.educationUrl="https://odn.data.socrata.com/resource/uf4m-5u8r.json?$where=",this.gdpUrl="https://odn.data.socrata.com/resource/ks2j-vhr8.json?$where=",this.mostPopulousRegionTypeUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_id={0}&child_type={1}&$limit={2}&$order=child_population desc",this.occupationsByPlaceUrl="https://odn.data.socrata.com/resource/qfcm-fw3i.json?occupation={0}&type=place&$limit=50000&$where=population%20%3E%205000",this.occupationsUrl="https://odn.data.socrata.com/resource/qfcm-fw3i.json?$order=occupation&$where=",this.parentStateUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_type=state&child_id={0}",this.placeFromRosterUrl="https://odn.data.socrata.com/resource/kmnh-b5wu?id={0}",this.placesUrl="https://odn.data.socrata.com/resource/gm3u-gw57.json/?type=place&$limit=50000&$where=population%20%3E%205000",this.populationUrl="https://odn.data.socrata.com/resource/e3rd-zzmr.json?$order=year,name&$where=",this.similarRegionsUrl="https://socrata-peers.herokuapp.com/peers.json?id={0}&vectors={1}&n=10",this.supportedVectorsUrls="http://socrata-peers.herokuapp.com/supported.json?id={0}",this.healthDataUrls={rwjf_county_health_rankings_2015:"https://odn.data.socrata.com/resource/7ayp-utp2.json?$where=",cdc_brfss_prevalence_2011_2013:"https://odn.data.socrata.com/resource/n4rt-3rmd.json?$where="}}return _createClass(e,[{key:"getAutoCompleteNameSuggestions",value:function(e){return d3.promise.json(this.autoCompleteNameSuggestUrl.format(encodeURIComponent(e)))}},{key:"getCategories",value:function(){return d3.promise.json(this.categoriesUrl)}},{key:"getChildRegions",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.childRegionsUrl.format(e,t))}},{key:"getCitiesInState",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(e,"place",t))}},{key:"getCostOfLivingData",value:function(e){return this.getData(this.costOfLivingUrl,e)}},{key:"getCountiesInState",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(e,"county",t))}},{key:"getData",value:function(e,t){var n=t.map(function(e){return"id='"+e+"'"});return d3.promise.json(e+encodeURI(n.join(" OR ")))}},{key:"getDomains",value:function(){return d3.promise.json(this.domainsUrl)}},{key:"getEarningsByPlace",value:function(){return d3.promise.json(this.earningsByPlaceUrl)}},{key:"getEarningsData",value:function(e){return this.getData(this.earningsUrl,e)}},{key:"getEducationByPlace",value:function(){return d3.promise.json(this.educationByPlaceUrl)}},{key:"getEducationData",value:function(e){return this.getData(this.educationUrl,e)}},{key:"getGdpData",value:function(e){return this.getData(this.gdpUrl,e)}},{key:"getMetrosInState",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(e,"msa",t))}},{key:"getOccupationsByPlace",value:function(e){return d3.promise.json(this.occupationsByPlaceUrl.format(e))}},{key:"getOccupationsData",value:function(e){return this.getData(this.occupationsUrl,e)}},{key:"getParentState",value:function(e){return d3.promise.json(this.parentStateUrl.format(e.id))}},{key:"getPlaceFromRoster",value:function(e){return d3.promise.json(this.placeFromRosterUrl.format(e))}},{key:"getPopulationData",value:function(e){return this.getData(this.populationUrl,e)}},{key:"getPlaces",value:function(){return d3.promise.json(this.placesUrl)}},{key:"getSimilarRegions",value:function(e,t){return d3.promise.json(this.similarRegionsUrl.format(e,t.join(",")))}},{key:"getSupportedVectors",value:function(e){return d3.promise.json(this.supportedVectorsUrls.format(e))}},{key:"getHealthRwjfChrData",value:function(e){return this.getData(this.healthDataUrls.rwjf_county_health_rankings_2015,e)}}]),e}(),Constants={ROSTER_URL:"https://federal.demo.socrata.com/resource/7g2b-8brv.json"},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),RegionLookup=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"get",value:function(e){return $.getJSON(Constants.ROSTER_URL+"?"+$.param(e))}},{key:"getOne",value:function(t){function n(e){if(0===e.length)return console.warn("no regions found for params: "),console.warn(t),null;if(1===e.length)return e[0];var n=_.filter(e,function(e){return"place"===e.type});return n.length>0?n[0]:e[0]}return new Promise(function(o,r){e.get(t).then(function(e){o(n(e))},function(e){throw e})})}},{key:"byName",value:function(t){return e.getOne({name:t})}},{key:"byID",value:function(t){return e.getOne({id:t})}},{key:"byAutocompleteName",value:function(t){return e.getOne({autocomplete_name:t})}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Complete=function(){function e(t,n){_classCallCheck(this,e),this.queryBuilder=t,this.results=n}return _createClass(e,[{key:"get",value:function(e){return""===e?[]:void this.results.handle($.getJSON(this.queryBuilder(e)))}}]),e}(),Results=function(){function e(t,n,o){_classCallCheck(this,e),this.type=t,this.onSelect=o,this.container=n.append("div").attr("class","autocomplete-results-container").style("display","none"),this.title=this.container.append("p").attr("class","autocomplete-results-title").text(this.type),this.results=this.container.append("div").attr("class","autocomplete-results")}return _createClass(e,[{key:"hide",value:function(){this.container.style("display","none")}},{key:"unhide",value:function(){this.container.style("display","block")}},{key:"empty",value:function(){this.results.html("")}},{key:"handle",value:function(e){var t=this,n=function(e){t.empty();var n=e.options;0===n.length?t.hide():(t.unhide(),t.show(n))},o=function(e){throw e};e.then(n,o)}},{key:"show",value:function(e){var t=this;this.results.selectAll("li").data(e).enter().append("li").html(function(e){return e.text}).on("mouseover",function(){d3.select(this).classed("selected",!0)}).on("mouseout",function(){d3.select(this).classed("selected",!1)}).on("click",function(e){t.onSelect(e.text)})}}]),e}(),AutoSuggestRegionController=function(){function e(t,n,o){_classCallCheck(this,e),this.inputSelection=t,this.resultSelection=n,this.completers=o}return _createClass(e,[{key:"listen",value:function(){var e=this;e.inputSelection.on("input",function(){e.suggest(this.value)})}},{key:"navigate",value:function(e){window.location.href=e}},{key:"suggest",value:function(e){""===e?this.resultSelection.style("display","none"):(this.resultSelection.style("display","block"),this.completers.forEach(function(t){t.get(e)}))}}]),e}(),sourceComplete=function(){function e(e){return function(o){return"https://"+t+"/views/"+n+"/columns/"+e+"/suggest/"+o+"?size=5"}}var t="odn.data.socrata.com",n="pfgp-ifph",o=new Map;o.set("population","population"),o.set("earnings","earnings"),o.set("education","education"),o.set("occupations","occupations"),o.set("cost_of_living","rpp"),o.set("gdp","gdp");var r="population";return function(t,n,s,a){var i=d3.select(t),u=d3.select(n),c=o.has(s)?o.get(s):r,l=e(c),p=new Results("Regions with Data",u,a),h=new Complete(l,p);return new AutoSuggestRegionController(i,u,[h])}}();$(document).ready(function(){$(".slider").slick({arrows:!1,autoplay:!0,autoplaySpeed:2e3,slidesToScroll:1,slidesToShow:5}),multiComplete("#q",".region-list").listen(),$("#search-button").click(function(){$("#form").submit()}),$("#menu-item-communities").mouseenter(function(){$("#menu-communities").slideToggle(100),$("#menu-item-communities").addClass("selected"),searchMenu.hideOptionsMenu()}),$("#menu-item-communities").mouseleave(function(){$("#menu-communities").hide(100),$("#menu-item-communities").removeClass("selected")})});
//# sourceMappingURL=home.min.js.map
