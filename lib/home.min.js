"use strict";function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function multiComplete(inputSelector,resultSelector){function autocompleteURL(domain,fxf,column){return function(query){return"https://"+domain+"/views/"+fxf+"/columns/"+column+"/suggest/"+query+"?size=5"}}function navigate(path){window.location.href=path}var domain="odn.data.socrata.com",inputSelection=d3.select(inputSelector),resultSelection=d3.select(resultSelector),datasetURL=autocompleteURL(domain,"fpum-bjbr","name"),datasetSelect=function(dataset){return navigate("/search?q="+dataset)},datasetResults=new Results("Datasets",resultSelection,datasetSelect),datasetComplete=new Complete(datasetURL,datasetResults),regionURL=autocompleteURL(domain,"7g2b-8brv","autocomplete_name"),regionSelect=function(region){return navigate("/"+region.replace(/ /g,"_"))},regionResults=new Results("Regions",resultSelection,regionSelect),regionComplete=new Complete(regionURL,regionResults),publisherURL=autocompleteURL(domain,"8ae5-ghum","domain"),publisherSelect=function(publisher){return navigate("/search?domains="+publisher)},publisherResults=new Results("Publishers",resultSelection,publisherSelect),publisherComplete=new Complete(publisherURL,publisherResults),categoryURL=autocompleteURL(domain,"864v-r7tf","category"),categorySelect=function(category){return navigate("/search?categories="+category)},categoryResults=new Results("Categories",resultSelection,categorySelect),categoryComplete=new Complete(categoryURL,categoryResults),completers=[datasetComplete,regionComplete,publisherComplete,categoryComplete];return new AutoSuggestRegionController(inputSelection,resultSelection,completers)}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();$(document).ready(function(){$(".search-link").click(function(){var text=$("#q").val().trim();0==text.length?$("#q").focus():$("#form").submit()})}),Array.prototype.includes=function(s){return this.indexOf(s)>-1},String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return"undefined"!=typeof args[number]?args[number]:match})},String.prototype.split2=function(s){var rg=this.split(s);return 1==rg.length&&""==rg[0]?[]:rg};var ApiController=function(){function ApiController(){_classCallCheck(this,ApiController),this.autoCompleteNameSuggestUrl="https://odn.data.socrata.com/views/7g2b-8brv/columns/autocomplete_name/suggest/{0}?size=10&fuzz=0",this.categoriesUrl="/categories.json",this.childRegionsUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_id={0}&$limit={1}",this.costOfLivingUrl="https://odn.data.socrata.com/resource/hpnf-gnfu.json?$order=name&$where=",this.domainsUrl="https://api.us.socrata.com/api/catalog/v1/domains",this.earningsByPlaceUrl="https://odn.data.socrata.com/resource/wmwh-4vak.json/?type=place&$limit=50000&$where=population%20%3E%205000",this.earningsUrl="https://odn.data.socrata.com/resource/wmwh-4vak.json?$where=",this.educationByPlaceUrl="https://odn.data.socrata.com/resource/uf4m-5u8r.json?type=place&$limit=50000&$where=population%20%3E%205000",this.educationUrl="https://odn.data.socrata.com/resource/uf4m-5u8r.json?$where=",this.gdpUrl="https://odn.data.socrata.com/resource/ks2j-vhr8.json?$where=",this.mostPopulousRegionTypeUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_id={0}&child_type={1}&$limit={2}&$order=child_population desc",this.occupationsByPlaceUrl="https://odn.data.socrata.com/resource/qfcm-fw3i.json?occupation={0}&type=place&$limit=50000&$where=population%20%3E%205000",this.occupationsUrl="https://odn.data.socrata.com/resource/qfcm-fw3i.json?$order=occupation&$where=",this.parentStateUrl="https://odn.data.socrata.com/resource/eyae-8jfy?parent_type=state&child_id={0}",this.placesUrl="https://odn.data.socrata.com/resource/gm3u-gw57.json/?type=place&$limit=50000&$where=population%20%3E%205000",this.populationUrl="https://odn.data.socrata.com/resource/e3rd-zzmr.json?$order=year,name&$where=",this.similarRegionsUrl="https://socrata-peers.herokuapp.com/peers.json?vectors=population_change,earnings,occupation,education,population&n=10&id={0}",this.healthDataUrls={rwjf_county_health_rankings_2015:"https://odn.data.socrata.com/resource/7ayp-utp2.json?$where=",cdc_brfss_prevalence_2011_2013:"https://odn.data.socrata.com/resource/n4rt-3rmd.json?$where="}}return _createClass(ApiController,[{key:"getAutoCompleteNameSuggestions",value:function(searchTerm){return d3.promise.json(this.autoCompleteNameSuggestUrl.format(encodeURIComponent(searchTerm)))}},{key:"getCategories",value:function(){return d3.promise.json(this.categoriesUrl)}},{key:"getChildRegions",value:function(regionId){var limit=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.childRegionsUrl.format(regionId,limit))}},{key:"getCitiesInState",value:function(stateId){var limit=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(stateId,"place",limit))}},{key:"getCostOfLivingData",value:function(regionIds){return this.getData(this.costOfLivingUrl,regionIds)}},{key:"getCountiesInState",value:function(stateId){var limit=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(stateId,"county",limit))}},{key:"getData",value:function(url,regionIds){var segments=regionIds.map(function(regionId){return"id='"+regionId+"'"});return d3.promise.json(url+encodeURI(segments.join(" OR ")))}},{key:"getDomains",value:function(){return d3.promise.json(this.domainsUrl)}},{key:"getEarningsByPlace",value:function(){return d3.promise.json(this.earningsByPlaceUrl)}},{key:"getEarningsData",value:function(regionIds){return this.getData(this.earningsUrl,regionIds)}},{key:"getEducationByPlace",value:function(){return d3.promise.json(this.educationByPlaceUrl)}},{key:"getEducationData",value:function(regionIds){return this.getData(this.educationUrl,regionIds)}},{key:"getGdpData",value:function(regionIds){return this.getData(this.gdpUrl,regionIds)}},{key:"getMetrosInState",value:function(stateId){var limit=arguments.length<=1||void 0===arguments[1]?10:arguments[1];return d3.promise.json(this.mostPopulousRegionTypeUrl.format(stateId,"msa",limit))}},{key:"getOccupationsByPlace",value:function(occupation){return d3.promise.json(this.occupationsByPlaceUrl.format(occupation))}},{key:"getOccupationsData",value:function(regionIds){return this.getData(this.occupationsUrl,regionIds)}},{key:"getParentState",value:function(region){return d3.promise.json(this.parentStateUrl.format(region.id))}},{key:"getPopulationData",value:function(regionIds){return this.getData(this.populationUrl,regionIds)}},{key:"getPlaces",value:function(){return d3.promise.json(this.placesUrl)}},{key:"getSimilarRegions",value:function(regionId){return d3.promise.json(this.similarRegionsUrl.format(regionId))}},{key:"getHealthRwjfChrData",value:function(regionIds){return this.getData(this.healthDataUrls.rwjf_county_health_rankings_2015,regionIds)}}]),ApiController}(),Constants={ROSTER_URL:"https://federal.demo.socrata.com/resource/7g2b-8brv.json",LIMIT:5e4},RegionLookup=function(){function RegionLookup(){_classCallCheck(this,RegionLookup)}return _createClass(RegionLookup,null,[{key:"get",value:function(params){return $.getJSON(Constants.ROSTER_URL+"?"+$.param(params))}},{key:"getOne",value:function(params){function selectRegion(regions){if(0===regions.length)return console.warn("no regions found for params: "),console.warn(params),null;if(1===regions.length)return regions[0];var places=_.filter(regions,function(region){return"place"===region.type});return places.length>0?places[0]:regions[0]}return new Promise(function(resolve,reject){RegionLookup.get(params).then(function(regions){resolve(selectRegion(regions))},function(error){throw error})})}},{key:"byName",value:function(name){return RegionLookup.getOne({name:name})}},{key:"byID",value:function(id){return RegionLookup.getOne({id:id})}},{key:"byAutocompleteName",value:function(name){return RegionLookup.getOne({autocomplete_name:name})}}]),RegionLookup}(),Complete=function(){function Complete(queryBuilder,results){_classCallCheck(this,Complete),this.queryBuilder=queryBuilder,this.results=results}return _createClass(Complete,[{key:"get",value:function(query){return""==query?[]:void this.results.handle($.getJSON(this.queryBuilder(query)))}}]),Complete}(),Results=function(){function Results(type,resultSelection,onSelect){_classCallCheck(this,Results),this.type=type,this.onSelect=onSelect,this.container=resultSelection.append("div").attr("class","autocomplete-results-container").style("display","none"),this.title=this.container.append("p").attr("class","autocomplete-results-title").text(this.type),this.results=this.container.append("div").attr("class","autocomplete-results")}return _createClass(Results,[{key:"hide",value:function(){this.container.style("display","none")}},{key:"unhide",value:function(){this.container.style("display","block")}},{key:"empty",value:function(){this.results.html("")}},{key:"handle",value:function(resultsPromise){var _this=this,success=function(results){_this.empty();var options=results.options;0==options.length?_this.hide():(_this.unhide(),_this.show(options))},failure=function(error){throw error};resultsPromise.then(success,failure)}},{key:"show",value:function(options){var _this2=this;this.results.selectAll("li").data(options).enter().append("li").html(function(option){return option.text}).on("mouseover",function(){d3.select(this).classed("selected",!0)}).on("mouseout",function(){d3.select(this).classed("selected",!1)}).on("click",function(option){_this2.onSelect(option.text)})}}]),Results}(),AutoSuggestRegionController=function(){function AutoSuggestRegionController(inputSelection,resultSelection,completers){_classCallCheck(this,AutoSuggestRegionController),this.inputSelection=inputSelection,this.resultSelection=resultSelection,this.completers=completers}return _createClass(AutoSuggestRegionController,[{key:"listen",value:function(){var self=this;self.inputSelection.on("input",function(){self.suggest(this.value)})}},{key:"navigate",value:function(path){window.location.href=path}},{key:"suggest",value:function(term){""==term?this.resultSelection.style("display","none"):(this.resultSelection.style("display","block"),this.completers.forEach(function(completer){completer.get(term)}))}}]),AutoSuggestRegionController}(),sourceComplete=function(){function urlFor(column){return function(query){return"https://"+domain+"/views/"+fxf+"/columns/"+column+"/suggest/"+query+"?size=5"}}var domain="odn.data.socrata.com",fxf="pfgp-ifph",nameToColumn=new Map;nameToColumn.set("population","population"),nameToColumn.set("earnings","earnings"),nameToColumn.set("education","education"),nameToColumn.set("occupations","occupations"),nameToColumn.set("cost_of_living","rpp"),nameToColumn.set("gdp","gdp");var defaultColumn="population";return function(inputSelector,resultSelector,name,select){var inputSelection=d3.select(inputSelector),resultSelection=d3.select(resultSelector),column=nameToColumn.has(name)?nameToColumn.get(name):defaultColumn,url=urlFor(column),results=new Results("Regions with Data",resultSelection,select),complete=new Complete(url,results);return new AutoSuggestRegionController(inputSelection,resultSelection,[complete])}}(),MapConstants={BASE_LAYER_URL:"https://a.tiles.mapbox.com/v3/socrata-apps.ibp0l899/{z}/{x}/{y}.png",BASE_LAYER_OPACITY:.5,ATTRIBUTION:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',INITIAL_CENTER:[37.1669,-95.9669],BOUNDS_SOUTH_WEST:[18.9117,-179.1506],BOUNDS_NORTH_EAST:[71.441,-66.9406],MIN_ZOOM:3,MAX_ZOOM:12,INITIAL_ZOOM:4,PLACE_ZOOM:10,AUTOZOOM_PADDING:100,REGION_BORDER_COLOR:"#34495e",REGION_BORDER_WEIGHT:1,REGION_FILL_OPACITY:1,REFERENCE_BORDER_COLOR:"#2c3e50",REFERENCE_BORDER_WEIGHT:2,POINT_RADIUS_RANGE_METERS:[500,2e3],POINT_FILL_OPACITY:1,LOADING_TOOLTIP_NAME:"Loading",REGION_SELECT_WIDTH:150,VARIABLE_SELECT_WIDTH:300,OPTIONS:{scrollWheelZoom:!1,bounceAtZoomLimits:!1},GAZETTEER_URL:"https://federal.demo.socrata.com/resource/gm3u-gw57.json",ROSTER_URL:"https://federal.demo.socrata.com/resource/7g2b-8brv.json",TOPOJSON_DIRECTORY:"geo/",TOPOJSON_SUFFIX:".topo.json",REGIONS:{nation:{name:"USA",id:"nation",topo:"nation"},region:{name:"Regions",id:"region",topo:"region"},division:{name:"Divisions",id:"division",topo:"division"},state:{name:"States",id:"state",topo:"state"},county:{name:"Counties",id:"county",topo:"county"},msa:{name:"Metros",id:"msa",topo:"cbsa"},place:{name:"Cities",id:"place",topo:"state"}}},TopoModel=function(){function TopoModel(){_classCallCheck(this,TopoModel)}return _createClass(TopoModel,null,[{key:"get",value:function(region){var url=MapConstants.TOPOJSON_DIRECTORY+region.topo+MapConstants.TOPOJSON_SUFFIX;return $.getJSON(url)}}]),TopoModel}(),MapModel=function(){function MapModel(source,region,variable,regions){_classCallCheck(this,MapModel),this.source=source,this.region=region,this.variable=variable,this.regions=regions}return _createClass(MapModel,null,[{key:"create",value:function(source,region,variable){return new Promise(function(resolve,reject){function success(results){var regions=results.map(function(region){var value=variable.value(region[variable.column]);return{id:region.id,type:region.type,name:region.name,value:value,valueFormatted:variable.format(value)}});resolve(new MapModel(source,region,variable,regions))}function failure(error){throw error}var baseParams={type:region.id,$select:["id","type","name"].concat([variable.column]).join(),$limit:Constants.LIMIT},params=_.extend({},baseParams,variable.params),url="https://"+source.domain+"/resource/"+source.fxf+".json?"+$.param(params);$.getJSON(url).then(success,failure)})}}]),MapModel}(),MapView=function(){function MapView(cssID){_classCallCheck(this,MapView),this.map=MapView.createMap(cssID)}return _createClass(MapView,[{key:"show",value:function(model){console.log(model)}}],[{key:"createMap",value:function(id){var map=L.map(id,{minZoom:MapConstants.MIN_ZOOM,maxZoom:MapConstants.MAX_ZOOM});return map.setView(MapConstants.INITIAL_CENTER,MapConstants.INITIAL_ZOOM),L.tileLayer(MapConstants.BASE_LAYER_URL,{opacity:MapConstants.BASE_LAYER_OPACITY,attribution:MapConstants.ATTRIBUTION}).addTo(map),map}}]),MapView}(),aasdasd=function(selection,config,model,selected){function drawQuantileScale(scale,values,variable){legendContainer.selectAll("svg.legend").remove();var dimension=10,range=scale.range().slice();range.reverse();var height=range.length*dimension,width=240,xOffset=width/2;values=_.filter(values,function(value){return!isNaN(value)});var _d3$extent=d3.extent(values),_d3$extent2=_slicedToArray(_d3$extent,2),min=_d3$extent2[0],max=_d3$extent2[1],lowerQuartile=d3.quantile(values,.25),median=d3.median(values),upperQuartile=d3.quantile(values,.75),tickValues=[max,upperQuartile,median,lowerQuartile,min],tickNames=["maximum","upper quartile","median","lower quartile","minimum"],tickData=_.zip(tickValues,tickNames),tickStep=height/(tickData.length-1),legend=legendContainer.append("svg").attr("width",width).attr("height",height+30+3*dimension).attr("class","legend"),tickGroup=(legend.append("text").attr("class","legend-name").attr("text-anchor","middle").attr("x",xOffset+dimension/2).attr("y",1.2*dimension).text(variable.name),legend.append("g").attr("class","ticks")),ticks=tickGroup.selectAll("g.tick").data(tickData).enter().append("g").attr("class","tick").attr("transform",function(__,index){return"translate("+xOffset+", "+(3*dimension+index*tickStep)+")"});ticks.append("line").attr("class","tick-line").attr("x1",dimension).attr("y1",0).attr("x2",2*dimension).attr("y2",0),ticks.append("line").attr("class","tick-line").attr("x1",-dimension).attr("y1",0).attr("x2",0).attr("y2",0);var baseline="middle",padding=2;ticks.append("text").attr("class","tick-value").text(function(tick){return variable.format(tick[0])}).attr("alignment-baseline",baseline).attr("transform","translate("+(2*dimension+padding)+", 0)"),ticks.append("text").attr("class","tick-label").text(function(tick){return tick[1]}).attr("text-anchor","end").attr("alignment-baseline",baseline).attr("transform","translate("+-(dimension+padding)+", 0)");legend.selectAll("rect").data(range).enter().append("rect").attr("class","legend-element").attr("x",xOffset).attr("y",function(__,index){return(index+3)*dimension}).attr("width",dimension).attr("height",dimension).style("stroke","none").style("fill",function(color){return color});legend.append("rect").attr("class","legend-box").attr("x",xOffset).attr("y",3*dimension).attr("width",dimension).attr("height",height)}function drawScale(scaleTuple){var _scaleTuple=_slicedToArray(scaleTuple,3),scale=_scaleTuple[0],values=_scaleTuple[1],variable=_scaleTuple[2];drawQuantileScale(scale,values,variable)}function choropleth(topology,regionLookup,scale){function styleLayer(layer){var id=layer.feature.id;id in regionLookup?!function(){var region=regionLookup[id],regionStyle={stroke:!0,color:Constants.MAP_REGION_BORDER_COLOR,weight:Constants.MAP_REGION_BORDER_WEIGHT,fillColor:region.fill,fillOpacity:Constants.MAP_REGION_FILL_OPACITY};layer.setStyle(regionSelection.getStyle(region,regionStyle)),layer.on({mouseover:function(){tip.show(region)},mouseout:tip.hide}),regionSelection.isSelected(region)&&selectedLayers.push(layer)}():layer.setStyle({stroke:!0,color:Constants.MAP_REFERENCE_BORDER_COLOR,weight:Constants.MAP_REFERENCE_BORDER_WEIGHT,fill:!1,clickable:!1})}drawScale(scale);var selectedLayers=[],topoLayer=omnivore.topojson.parse(topology);topoLayer.eachLayer(styleLayer).addTo(map);var layerGroup=new L.featureGroup(selectedLayers);map.fitBounds(layerGroup.getBounds(),{padding:[Constants.MAP_AUTOZOOM_PADDING,Constants.MAP_AUTOZOOM_PADDING]}),layers.add(topoLayer),tip.hide()}function pointMap(regionLookup,locationLookup,scale){function stylePoint(feature,coordinate){var id=feature.id;if(!(id in regionLookup))return L.circleMarker(coordinate,{stroke:!1,fill:!1});var _ret2=function(){var region=regionLookup[id],regionStyle={fillColor:region.fill},baseStyle=_.extend(pointStyle,regionStyle),style=regionSelection.getStyle(region,baseStyle),marker=L.circle(coordinate,radiusScale(feature.population),style);return marker.on({mouseover:function(){tip.show(region)},mouseout:tip.hide}),regionSelection.isSelected(region)&&(selectedMarkers.push(marker),L.marker(coordinate).addTo(map).bindPopup(region.name).openPopup()),{v:marker}}();return"object"===("undefined"==typeof _ret2?"undefined":_typeof(_ret2))?_ret2.v:void 0}drawScale(scale);var population=(_.intersection(_.keys(regionLookup),_.keys(locationLookup)),function(feature){return parseFloat(feature.population)}),points=function(){var points=_.map(_.values(locationLookup),_.property("location"));return _.sortBy(points,population)}(),populations=_.map(points,population),radiusScale=d3.scale.log().domain(d3.extent(populations)).range(Constants.MAP_POINT_RADIUS_RANGE_METERS),pointStyle={stroke:!0,weight:8,opacity:0,pointerEvents:"all",fill:!0,fillOpacity:Constants.MAP_POINT_FILL_OPACITY},selectedMarkers=[],pointLayer=L.geoJson(points,{pointToLayer:stylePoint}).addTo(map);if(1==selectedMarkers.length){var marker=selectedMarkers[0];map.setView(marker.getLatLng(),Constants.MAP_PLACE_ZOOM,{animate:!0})}else if(selectedMarkers.length>1){var markerGroup=new L.featureGroup(selectedMarkers);map.fitBounds(markerGroup.getBounds())}layers.add(pointLayer),tip.hide()}function update(region,variable){region||console.log("no region"),variable||console.log("no variable"),layers.remove(),tip.show({valueName:Constants.MAP_LOADING_TOOLTIP_NAME,valueFormatted:variable.name+" for "+region.name+"..."}),"place"==region.id?model.getPointData(config,region,variable,pointMap):model.getChoroplethData(config,region,variable,choropleth)}var container=selection.append("div").attr("class","dynamic-map-container"),madId="leaflet-map",mapContainer=container.append("div").attr("id",madId),selectContainer=container.append("div").attr("class","select-container"),regionSelect=selectContainer.append("select"),variableSelect=selectContainer.append("select"),legendContainer=container.append("div").attr("class","legend-container"),tip=maps.tooltip(mapContainer),map=function(){var map=L.map(madId,{minZoom:Constants.MAP_MIN_ZOOM,maxZoom:Constants.MAP_MAX_ZOOM});return map.setView(Constants.MAP_INITIAL_CENTER,Constants.MAP_INITIAL_ZOOM),L.tileLayer(Constants.MAP_BASE_LAYER_URL,{opacity:Constants.MAP_BASE_LAYER_OPACITY,attribution:Constants.MAP_ATTRIBUTION}).addTo(map),map}(),layers=function(){function add(layer){rendered.push(layer)}function removeLayer(layer){map.removeLayer(layer)}function remove(){_.each(rendered,removeLayer),rendered=[]}var rendered=[];return{add:add,remove:remove}}(),regionSelection=function(){function isSelected(region){return _.contains(selected.ids,region.id)}function getStyle(region,styles){return isSelected(region)?_.extend({},styles,selectedStyle):styles}function getRegionType(){var regionTypeId=selected.regions[0],regionTypes=config.regions,regionType=_.findWhere(regionTypes,{id:regionTypeId});return regionType?regionType:config.defaultRegion}var selectedStyle={stroke:!0,color:"yellow",weight:2,opacity:1};return{isSelected:isSelected,getStyle:getStyle,getRegionType:getRegionType}}();return function(){function updateView(){update(selectedRegion,selectedVariable)}function onSelectRegion(regionId){selectedRegion=_.find(regions,function(region){return region.id===regionId}),updateView()}function onSelectVariable(variableId){selectedVariable=_.find(variables,function(variable){return variable.id===variableId}),updateView()}function selectFactory(select,config,options,defaultOption,callback){var option=Menu.optionFactory(_.property("name"),_.property("id")),_options=_.map(options,option),_defaultOption=option(defaultOption);Menu.create(select,config,_options,_defaultOption,callback)}var regions=config.regions,selectedRegion=regionSelection.getRegionType(),variables=config.variables,selectedVariable=config.defaultVariable;selectFactory(regionSelect,{width:Constants.MAP_REGION_SELECT_WIDTH},regions,selectedRegion,onSelectRegion),selectFactory(variableSelect,{width:Constants.MAP_VARIABLE_SELECT_WIDTH},variables,selectedVariable,onSelectVariable),updateView(selectedRegion,selectedVariable)}(),{update:update}};$(document).ready(function(){$(".slider").slick({arrows:!1,autoplay:!0,autoplaySpeed:2e3,slidesToScroll:1,slidesToShow:5}),multiComplete("#q",".region-list").listen(),$("#search-button").click(function(){$("#form").submit()}),$("#menu-item-communities").mouseenter(function(){$("#menu-communities").slideToggle(100),$("#menu-item-communities").addClass("selected"),searchMenu.hideOptionsMenu()}),$("#menu-item-communities").mouseleave(function(){$("#menu-communities").hide(100),$("#menu-item-communities").removeClass("selected")})});
//# sourceMappingURL=home.min.js.map