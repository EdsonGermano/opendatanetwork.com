// https://github.com/mapbox/mapbox-gl-leaflet

L.MapboxGL=L.Class.extend({initialize:function(t){if(L.setOptions(this,t),!t.accessToken)throw new Error("You should provide a Mapbox GL access token as a token option.");mapboxgl.accessToken=t.accessToken},onAdd:function(t){this._map=t,this._glContainer||this._initContainer(),t._panes.tilePane.appendChild(this._glContainer),t.on("zoomanim",this._animateZoom,this),t.on("move",this._update,this),this._initGL()},onRemove:function(t){t.getPanes().tilePane.removeChild(this._glContainer),t.off("zoomanim",this._animateZoom,this),t.off("move",this._update,this),this._glMap.remove(),this._glMap=null},addTo:function(t){return t.addLayer(this),this},_initContainer:function(){var t=this._glContainer=L.DomUtil.create("div","leaflet-gl-layer"),i=this._map.getSize();t.style.width=i.x+"px",t.style.height=i.y+"px"},_initGL:function(){var t=this._map.getCenter(),i=L.extend({},this.options,{container:this._glContainer,interactive:!1,center:[t.lng,t.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new mapboxgl.Map(i)},_update:function(){var t=this._map.getSize(),i=this._glContainer,e=this._glMap,n=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(i,n);var o=this._map.getCenter(),a=e.transform;a.center=mapboxgl.LngLat.convert([o.lng,o.lat]),a.zoom=this._map.getZoom()-1,e.transform.width!==t.x||e.transform.height!==t.y?(i.style.width=t.x+"px",i.style.height=t.y+"px",e.resize()):e.update()},_animateZoom:function(t){var i=t.origin.add(this._map._getMapPanePos()).subtract(this._map.getSize().divideBy(2));this._glMap.zoomTo(t.zoom-1,{duration:250,offset:[i.x,i.y],easing:[0,0,.25,1]})}}),L.mapboxGL=function(t){return new L.MapboxGL(t)};

