function RegionController(){var baseUrl="https://federal.demo.socrata.com/views/7g2b-8brv",autoCompleteNameSuggestUrl=baseUrl+"/columns/autocomplete_name/suggest/{0}?size=10&fuzz=0";$("#q").keyup(function(){var searchTerm=$("#q").val().trim();if(0==searchTerm.length)return void $(".region-list").slideUp(100);var url=autoCompleteNameSuggestUrl.format(encodeURIComponent(searchTerm));$.getJSON(url,function(data){var regionList=$(".region-list");if(0==data.options.length)return void regionList.slideUp(100);var items=data.options.map(function(item){return"<li>"+item.text+"</li>"});regionList.html(items.join("")),$(".region-list li").click(function(){$("#region").val($(this).text()),regionList.slideUp()}),regionList.slideDown(100)})})}function SearchMenuController(){this.categories=this.getParameterByName("categories").split2(",");var self=this;$("#q").focusin(function(){$(".search-textbox-tip").fadeOut()}),$(".search-link").click(function(){var text=$("#q").val().trim();0==text.length?$("#q").focus():$("#form").submit()}),$(".search-options-link").click(function(){$(".search-options-menu").slideToggle(100),$(".search-dropdown-tip").fadeOut()}),$(".search-options-menu-all").click(function(){self.clearCategories()}),$(".search-options-menu li a").click(function(){self.toggleCategory($(this))}),this.updateMenuState()}$(document).ready(function(){new RegionController;var searchMenu=new SearchMenuController;$("#menu-item-communities").mouseenter(function(){$("#menu-communities").slideToggle(100),$("#menu-item-communities").addClass("selected"),searchMenu.hideOptionsMenu()}),$("#menu-item-communities").mouseleave(function(){$("#menu-communities").hide(100),$("#menu-item-communities").removeClass("selected")})}),SearchMenuController.prototype.clearCategories=function(){this.categories=[],$("#categories").val(""),console.log($("#categories").val()),this.updateMenuState()},SearchMenuController.prototype.getParameterByName=function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},SearchMenuController.prototype.hideOptionsMenu=function(){$(".search-options-menu").fadeOut()},SearchMenuController.prototype.toggleCategory=function(o){var category=o.text().toLowerCase().trim(),i=this.categories.indexOf(category);i>-1?this.categories.splice(i,1):this.categories.push(category),$("#categories").val(this.categories.join(",")),console.log($("#categories").val()),this.updateMenuState()},SearchMenuController.prototype.updateMenuState=function(){var self=this;0==this.categories.length?$(".search-options-menu-all .fa-check").show():$(".search-options-menu-all .fa-check").hide(),$(".search-options-menu li a").each(function(){self.categories.includes($(this).text().toLowerCase().trim())?$(this).children(".fa-check").show():$(this).children(".fa-check").hide()})},String.prototype.split2=function(s){var rg=this.split(s);return 1==rg.length&&""==rg[0]?[]:rg},Array.prototype.includes=function(s){return this.indexOf(s)>-1},String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return"undefined"!=typeof args[number]?args[number]:match})};