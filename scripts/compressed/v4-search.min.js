$(document).ready(function(){function drawCharts(){apiController.getPopulationData(regionId,function(data){var rg=data.map(function(item){return[item.year,parseInt(item.population)]});rg.reverse(),rg.unshift(["Year","Seattle Population"]);var dataTable=google.visualization.arrayToDataTable(rg),options={title:"Population",curveType:"function",legend:{position:"bottom"}},chart=new google.visualization.LineChart(document.getElementById("population-chart"));chart.draw(dataTable,options)}),apiController.getPopulationChangeData(regionId,function(data){var rg=data.map(function(item){return[item.year,parseFloat(item.population_percent_change)]});rg.reverse(),rg.unshift(["Year","Population Change"]);var dataTable=google.visualization.arrayToDataTable(rg),options={title:"Seattle Population Change",curveType:"function",legend:{position:"bottom"}},chart=new google.visualization.LineChart(document.getElementById("population-change-chart"));chart.draw(dataTable,options)})}var searchPageController=new SearchPageController(_params);if(new RegionController(function(region){searchPageController.setAutoCompletedRegion(region),searchPageController.navigate()}),_params.regions.length>0){var apiController=new ApiController,regionId=_params.regions[0].id;apiController.getEducationData(regionId),apiController.getEarningsData(regionId),apiController.getOccupationsData(regionId),apiController.getGdpData(),apiController.getCostOfLivingData(),google.setOnLoadCallback(drawCharts)}});