function clear(){_controller.clearCategories(),_controller.navigate()}function category(category){_controller.toggleCategory(category),_controller.navigate()}function next(){_controller.tryChangePage(1)&&_controller.navigate()}function prev(){_controller.tryChangePage(-1)&&_controller.navigate()}function tag(tag){_controller.applyTag(tag),_controller.navigate()}function SearchPageController(params){this.params=params}$(document).ready(function(){$(".search-link").click(function(){var text=$("#q").val().trim();0==text.length?$("#q").focus():$("#form").submit()})}),SearchPageController.prototype.applyTag=function(tag){this.params.tags=[tag],this.params.page=1},SearchPageController.prototype.clearCategories=function(){this.params.categories=[]},SearchPageController.prototype.getSearchUrl=function(){var searchUrl=window.location.href.split("?")[0],url=searchUrl+"?q="+encodeURIComponent($("#q").val());return this.params.page>1&&(url+="&page="+this.params.page),this.params.categories.length>0&&(url+="&categories="+encodeURIComponent(this.params.categories.join(","))),this.params.domains.length>0&&(url+="&domains="+encodeURIComponent(this.params.domains.join(","))),this.params.tags.length>0&&(url+="&tags="+encodeURIComponent(this.params.tags.join(","))),console.log(url),url},SearchPageController.prototype.navigate=function(){window.location.href=this.getSearchUrl()},SearchPageController.prototype.toggleCategory=function(category){var i=this.params.categories.indexOf(category);i>-1?this.params.categories.splice(i,1):this.params.categories.push(category),this.params.page=1},SearchPageController.prototype.tryChangePage=function(diff){return this.params.page+diff<1?!1:this.params.page+diff>this.params.totalPages?!1:(this.params.page=this.params.page+diff,!0)};