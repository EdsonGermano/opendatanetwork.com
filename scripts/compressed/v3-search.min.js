function SearchPageController(params){var self=this;this.params=params,$(".filter-pane-categories li a").click(function(){self.toggleCategory($(this).text()),self.navigate()}),$(".filter-pane-domains li a").click(function(){self.toggleDomain($(this).text()),self.navigate()}),$(".filter-pane-tags li a").click(function(){self.toggleTag($(this).text()),self.navigate()}),$(".view-more-categories").click(function(){self.toggleCategoryFilters(),self.navigate()}),$(".view-more-domains").click(function(){self.toggleDomainFilters(),self.navigate()}),$(".view-more-tags").click(function(){self.toggleTagFilters(),self.navigate()})}$(document).ready(function(){new SearchPageController(_params)}),SearchPageController.prototype.getSearchUrl=function(){var searchUrl=window.location.href.split("?")[0],url=searchUrl+"?q="+encodeURIComponent($("#q").val());return this.params.page>1&&(url+="&page="+this.params.page),this.params.categories.length>0&&(url+="&categories="+encodeURIComponent(this.params.categories.join(","))),this.params.domains.length>0&&(url+="&domains="+encodeURIComponent(this.params.domains.join(","))),this.params.tags.length>0&&(url+="&tags="+encodeURIComponent(this.params.tags.join(","))),this.params.ec&&(url+="&ec=1"),this.params.ed&&(url+="&ed=1"),this.params.et&&(url+="&et=1"),console.log(url),url},SearchPageController.prototype.navigate=function(){window.location.href=this.getSearchUrl()},SearchPageController.prototype.toggleCategory=function(category){category=category.toLowerCase();var i=this.params.categories.indexOf(category);i>-1?this.params.categories.splice(i,1):this.params.categories.push(category),this.params.page=1},SearchPageController.prototype.toggleDomain=function(domain){var i=this.params.domains.indexOf(domain);i>-1?this.params.domains.splice(i,1):this.params.domains.push(domain),this.params.page=1},SearchPageController.prototype.toggleTag=function(tag){var i=this.params.tags.indexOf(tag);i>-1?this.params.tags.splice(i,1):this.params.tags.push(tag),this.params.page=1},SearchPageController.prototype.toggleCategoryFilters=function(){this.params.ec=!this.params.ec},SearchPageController.prototype.toggleDomainFilters=function(){this.params.ed=!this.params.ed},SearchPageController.prototype.toggleTagFilters=function(){this.params.et=!this.params.et};